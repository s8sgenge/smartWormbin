<!DOCTYPE html>
<html lang="en">

<head>
  <title>IoT Smart Wormbin</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css">
  <link rel="stylesheet" type="text/css" href="style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
  <script src="script.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.4/Chart.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.9"></script>

</head>

<body onload="chartIt()" id="index" data-spy="scroll" data-target=".navbar" data-offset="60">
  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <div class="collapse navbar-collapse" id="myNavbar">
        <ul class="nav navbar-nav navbar-right">
          <li><a href="#about">ABOUT</a></li>
          <li><a href="#data_visualization">DATA VISUALIZATION</a></li>
          <li><a href="#blueprint">BLUEPRINT</a></li>
          <li><a href="#contact">CONTACT</a></li>
        </ul>
      </div>
    </div>
  </nav>
  <div class="jumbotron text-center">
    <h1><span id="typed"></span></h1>
    <span id="typed"></span>
    <p>Get blueprints to build your own bin or monitor mine </p>
  </div>

  <!-- Container (About Section) -->
  <div id="about" class="container-fluid">
    <div class="row">
      <div class="col-sm-8">
        <h2>About the Smart Wormbin</h2><br>
        <h4>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et
          dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea
          commodo consequat.</h4><br>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore
          magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
          consequat. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id
          est laborum consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut
          enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
      </div>
      <div class="col-sm-4 slideanim">
        <img src="worm.png" alt="Smiley face" height="390" width="">
      </div>
    </div>
  </div>

  <!-- Container (Data Visualization Section) -->
  <div id="data_visualization" class="container-fluid text-center bg-grey">
    <h2>Data Visualization</h2>
    <h4>Download the .json or .csv file and get creative</h4>
    <br>
    <div class="dv">
      <button class="btn btn-lg slideanim"><span class="glyphicon glyphicon-download-alt"></span> Download
        .json</button>
      <button class="btn btn-lg slideanim"><span class="glyphicon glyphicon-download-alt"></span> Download .csv</button>
      <br>
      <br>
      <div class="slideanim">
        </canvas><canvas id="chart"></canvas>
        <script>
          const xlabels = [];
          const yhumidity = [];
          const ytemperature = [];
          const ymoisture = [];
          async function chartIt() {
            await getData();
            const ctx = document.getElementById('chart').getContext('2d');
            const myChart = new Chart(ctx, {
              type: 'line',
              data: {
                labels: xlabels,
                datasets: [{
                  label: 'Humidity g/m3',
                  data: yhumidity,
                  backgroundColor: "rgba(105, 190, 148,0.4)"
                }, {
                  label: 'Temperature °C',
                  data: ytemperature,
                  backgroundColor: "rgba(105, 190, 148,0.4)"
                }, {
                  label: 'Moisture g/m3',
                  data: ymoisture,
                  backgroundColor: "rgba(105, 190, 148,0.4)"
                }]
              }
            });
          }

          async function getData() {
            const response = await fetch('smartWormbin.csv');
            const data = await response.text();

            const table = data.split('\n');
            table.forEach(row => {
              const columns = row.split(',');
              const timestamp = columns[0];
              xlabels.push(timestamp);
              const humidity = columns[1];
              yhumidity.push(humidity);
              const temperature = columns[2];
              ytemperature.push(temperature);
              const moisture = columns[3];
              ymoisture.push(moisture / 20);
              console.log(timestamp, humidity);
            });
          }

        </script>
      </div>
    </div>



    <!-- Container (Blueprint Section) -->
    <div id="blueprint" class="container-fluid">
      <div class="text-center">
        <h2>Blueprint</h2>
        <h4>Get all the materials and tools together and start building your own wormbin</h4>
      </div>
      <div class="row slideanim">
        <div class="col-sm-4 col-xs-12">
          <div class="panel panel-default text-center">
            <div class="panel-heading">
              <h1>Materials</h1>
            </div>
            <div class="panel-body al">
              <p><strong>2 x</strong> Wood panel, <input type="number" id="height" value="46" onblur="getHeight()"> cm x
                <input type="number" id="width" value="80" onblur="getWidth()"> cm, x 1.5 cm</p>
              <p><strong>2 x</strong> Wood panel, <input type="number" id="height1" value="32" onblur="getHeight1()"> cm
                x
                <input type="number" id="width1" value="77" onblur="getWidth1()"> cm x 1.5 cm</p>
              <p><strong>2 x</strong> Wood panel, <input type="number" id="height2" value="46" onblur="getHeight2()"> cm
                x
                <input type="number" id="width2" value="35" onblur="getHeight1()"> cm x 2 cm</p>
              <p><strong>16 x</strong> Wooden strip (ca 15 cm x 3 cm x 3 cm)</p>
              <p><strong>1 x</strong> Aviary mesh</p>
              <p><strong>2 x</strong> Furniture hinge</p>
              <p><strong>Min 80 x</strong> Wood screw</p>
              <p><strong>500 x</strong> Compostworm</p>
            </div>
            <div class="panel-footer">
              <h4>Can be found in your local building supply store</h4>
            </div>
          </div>
        </div>
        <div class="col-sm-4 col-xs-12">
          <div class="panel panel-default text-center">
            <div class="panel-heading">
              <h1>Tools</h1>
            </div>
            <div class="panel-body">
              <p><strong>•</strong> Drill</p>
              <p><strong>•</strong> (Electric) Screwdriver</p>
              <p><strong>•</strong> Stapler</p>
              <p><strong>•</strong> (Optional) Angle grinder</p>
              <p>&nbsp</p>
              <p>&nbsp</p>
              <p>&nbsp</p>
              <p>&nbsp</p>
            </div>
            <div class="panel-footer">
              <h4>I bet you know someone, who can help you out</h4>
            </div>
          </div>
        </div>
        <div class="col-sm-4 col-xs-12">
          <div class="panel panel-default text-center">
            <div class="panel-heading">
              <h1>Augmentation</h1>
            </div>
            <div class="panel-body">
              <p><strong>•</strong> Arduino UNO</p>
              <p><strong>•</strong> Temperature sensor</p>
              <p><strong>•</strong> Moisture sensor</p>
              <p><strong>•</strong> Weight sensor</p>
              <p>&nbsp</p>
              <p>&nbsp</p>
              <p>&nbsp</p>
              <p>&nbsp</p>
            </div>
            <div class="panel-footer">
              <h4>Easy to build, you can find the needed code below</h4>
            </div>
          </div>
        </div>
      </div>
    </div>


    <!-- Container (Code Section) -->
    <div id="code" class="container-fluid">
      <div class="text-center">
      </div>
      <div class="row slideanim">
        <div class="col-sm-6 col-xs-12">
          <h4>Arduino Code</h4>
          <div class="bootstrap-demo">
            <pre><p>
#include "DHT.h" //DHT Bibliothek laden

#define DHTPIN 2 //Der Sensor wird an PIN 2 angeschlossen    
            
#define DHTTYPE DHT11    // Es handelt sich um den DHT11 Sensor
            
DHT dht(DHTPIN, DHTTYPE); //Der Sensor wird ab jetzt mit „dth“ angesprochen
            
void setup() {
  Serial.begin(9600); // open serial port, set the baud rate to 9600 bps
  dht.begin(); //DHT11 Sensor starten
}
void loop() {
  delay(2000); //Zwei Sekunden Vorlaufzeit
  float Luftfeuchtigkeit = dht.readHumidity(); //Luftfeuchtigkeit auslesen
            
  float Temperatur = dht.readTemperature();//Temperatur auslesen
            
  float SoilMoisture = analogRead(A0); //Erdfeuchtigkeit auslesen
            
  Serial.println(Luftfeuchtigkeit); //über serial port senden
  Serial.println(Temperatur);
  Serial.println(SoilMoisture);
}</p></pre>

          </div>
        </div>
        <div class="col-sm-6 col-xs-12">
          <h4>Python serial port reader</h4>
          <div class="bootstrap-demo">
            <pre><p>
        import serial
        import time
        import csv
        ser = serial.Serial('COM4')
        ser.flushInput()
                  
        while True:
          try:
            humidity = ser.readline()
            temperature = ser.readline()
            moisture = ser.readline()
                  
            humidity = humidity.decode('ASCII')
            temperature = temperature.decode('ASCII')
            moisture = moisture.decode('ASCII')
                  
            humidity = str(humidity)
            humidity = humidity.strip()
            temperature = str(temperature)
            temperature = temperature.strip()
            moisture = str(moisture)
            moisture = moisture.strip()
            print(humidity)
            print(temperature)
            print(moisture)
            localtime = time.asctime(time.localtime(time.time()))
            with open("smartWormbin.csv", "a", newline='') as f:
              writer = csv.writer(f, delimiter=",")
              writer.writerow([localtime, humidity,temperature,moisture])
          except:
            print("Keyboard Interrupt")
            break
    </p></pre
      </div>
    </div>
  </div>

  <!-- Container (Code Section) -->
  <div id="code" class="container-fluid">
    <div class="text-center">
    </div>
    <div class="row slideanim">
      <div class="col-sm-6 col-xs-12">
        <h4>3D Model</h4>
        <iframe id="fac5c187-3605-4d85-b77c-fe8ff202911a"
      src="https://www.vectary.com/embed/viewer/v1/viewer.html?model=fac5c187-3605-4d85-b77c-fe8ff202911a&env=default&envRotation=0&autoplay=1&turntable=0&showPreloader=1"
      frameborder="0" width="100%" height="480"></iframe>
         </div>
      <div class="col-sm-6 col-xs-12">
          <h4>Arduino Schematic</h4>
          <br>
          <br>
          <br>
          <img class="img-responsive" src="Untitled Sketch 2_Steckplatine - Kopie.png" alt="">
        </div>
      </div>
    </div>
  

 
  
  <!-- Container (Contact Section) -->
  <div id="contact" class="container-fluid bg-grey text-center">
    <h2 class="text-center">CONTACT</h2>
    <p>Contact me and if you're lucky, I'll actually reply.</p>
    <p><span class="glyphicon glyphicon-map-marker"></span> 66111 Saarbrücken, Deutschland</p>
    <p><span class="glyphicon glyphicon-phone"></span> +49 15786013589</p>
    <p><span class="glyphicon glyphicon-envelope"></span> s8sgenge@stud.uni-saarland.de</p>
    <p><span class="glyphicon glyphicon-link"></span> <a href="http://opencircularity.info/hbksaar-1">Openness makes the
        world go round!</a></p>
  </div>

  <!-- Image of location/map -->
  <footer class="container-fluid text-center">
    <a href="#index" title="To Top">
      <span class="glyphicon glyphicon-chevron-up"></span>
    </a>

  </footer>



</body>

</html>